<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>
     Spark Release 3.5.4 | Apache Spark
    
  </title>

  

  

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,wght@0,400;0,500;0,700;1,400;1,500;1,700&Courier+Prime:wght@400;700&display=swap" rel="stylesheet">
  <link href="/css/custom.css" rel="stylesheet">
  <!-- Code highlighter CSS -->
  <link href="/css/pygments-default.css" rel="stylesheet">
  <link rel="icon" href="/favicon.ico" type="image/x-icon">

  <!-- Matomo -->
  <script>
    var _paq = window._paq = window._paq || [];
    /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
    _paq.push(["disableCookies"]);
    _paq.push(['trackPageView']);
    _paq.push(['enableLinkTracking']);
    (function() {
      var u="https://analytics.apache.org/";
      _paq.push(['setTrackerUrl', u+'matomo.php']);
      _paq.push(['setSiteId', '40']);
      var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
      g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
    })();
  </script>
  <!-- End Matomo Code -->
</head>
<body class="global">
<nav class="navbar navbar-expand-lg navbar-dark p-0 px-4" style="background: #1D6890;">
  <a class="navbar-brand" href="/">
    <img src="/images/spark-logo-rev.svg" alt="" width="141" height="72">
  </a>
  <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarContent"
          aria-controls="navbarContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse col-md-12 col-lg-auto pt-4" id="navbarContent">

    <ul class="navbar-nav me-auto">
      <li class="nav-item">
        <a class="nav-link active" aria-current="page" href="/downloads.html">Download</a>
      </li>
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="libraries" role="button" data-bs-toggle="dropdown"
           aria-expanded="false">
          Libraries
        </a>
        <ul class="dropdown-menu" aria-labelledby="libraries">
          <li><a class="dropdown-item" href="/sql/">SQL and DataFrames</a></li>
          <li><a class="dropdown-item" href="/spark-connect/">Spark Connect</a></li>
          <li><a class="dropdown-item" href="/streaming/">Spark Streaming</a></li>
          <li><a class="dropdown-item" href="/pandas-on-spark/">pandas on Spark</a></li>
          <li><a class="dropdown-item" href="/mllib/">MLlib (machine learning)</a></li>
          <li><a class="dropdown-item" href="/graphx/">GraphX (graph)</a></li>
          <li>
            <hr class="dropdown-divider">
          </li>
          <li><a class="dropdown-item" href="/third-party-projects.html">Third-Party Projects</a></li>
        </ul>
      </li>
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="documentation" role="button" data-bs-toggle="dropdown"
           aria-expanded="false">
          Documentation
        </a>
        <ul class="dropdown-menu" aria-labelledby="documentation">
          <li><a class="dropdown-item" href="/docs/latest/">Latest Release</a></li>
          <li><a class="dropdown-item" href="/documentation.html">Older Versions and Other Resources</a></li>
          <li><a class="dropdown-item" href="/faq.html">Frequently Asked Questions</a></li>
        </ul>
      </li>
      <li class="nav-item">
        <a class="nav-link active" aria-current="page" href="/examples.html">Examples</a>
      </li>
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="community" role="button" data-bs-toggle="dropdown"
           aria-expanded="false">
          Community
        </a>
        <ul class="dropdown-menu" aria-labelledby="community">
          <li><a class="dropdown-item" href="/community.html">Mailing Lists &amp; Resources</a></li>
          <li><a class="dropdown-item" href="/contributing.html">Contributing to Spark</a></li>
          <li><a class="dropdown-item" href="/improvement-proposals.html">Improvement Proposals (SPIP)</a>
          </li>
          <li><a class="dropdown-item" href="https://issues.apache.org/jira/browse/SPARK">Issue Tracker</a>
          </li>
          <li><a class="dropdown-item" href="/powered-by.html">Powered By</a></li>
          <li><a class="dropdown-item" href="/committers.html">Project Committers</a></li>
          <li><a class="dropdown-item" href="/history.html">Project History</a></li>
        </ul>
      </li>
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="developers" role="button" data-bs-toggle="dropdown"
           aria-expanded="false">
          Developers
        </a>
        <ul class="dropdown-menu" aria-labelledby="developers">
          <li><a class="dropdown-item" href="/developer-tools.html">Useful Developer Tools</a></li>
          <li><a class="dropdown-item" href="/versioning-policy.html">Versioning Policy</a></li>
          <li><a class="dropdown-item" href="/release-process.html">Release Process</a></li>
          <li><a class="dropdown-item" href="/security.html">Security</a></li>
        </ul>
      </li>
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="github" role="button" data-bs-toggle="dropdown" aria-expanded="false">
          GitHub
        </a>
        <ul class="dropdown-menu" aria-labelledby="github">
          <li><a class="dropdown-item" href="https://github.com/apache/spark">spark</a></li>
          <li><a class="dropdown-item" href="https://github.com/apache/spark-connect-go">spark-connect-go</a></li>
          <li><a class="dropdown-item" href="https://github.com/apache/spark-docker">spark-docker</a></li>
          <li><a class="dropdown-item" href="https://github.com/apache/spark-kubernetes-operator">spark-kubernetes-operator</a></li>
          <li><a class="dropdown-item" href="https://github.com/apache/spark-website">spark-website</a></li>
        </ul>
      </li>
    </ul>
    <ul class="navbar-nav ml-auto">
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="apacheFoundation" role="button"
           data-bs-toggle="dropdown" aria-expanded="false">
          Apache Software Foundation
        </a>
        <ul class="dropdown-menu" aria-labelledby="apacheFoundation">
          <li><a class="dropdown-item" href="https://www.apache.org/">Apache Homepage</a></li>
          <li><a class="dropdown-item" href="https://www.apache.org/licenses/">License</a></li>
          <li><a class="dropdown-item"
                 href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
          <li><a class="dropdown-item" href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
          <li><a class="dropdown-item" href="https://www.apache.org/security/">Security</a></li>
          <li><a class="dropdown-item" href="https://www.apache.org/events/current-event">Event</a></li>
        </ul>
      </li>
    </ul>
  </div>
</nav>

<div class="container">
  <div class="row mt-4">
    <div class="col-12 col-md-9">
      <h2>Spark Release 3.5.4</h2>


<p>Spark 3.5.4 is the third maintenance release containing security and correctness fixes. This release is based on the branch-3.5 maintenance branch of Spark. We strongly recommend all 3.5 users to upgrade to this stable release.</p>

<h3 id="notable-changes">Notable changes</h3>

<ul>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-47702">[SPARK-47702]</a>: Remove Shuffle service endpoint from the locations list when RDD block is removed form a node</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-48155">[SPARK-48155]</a>: AQEPropagateEmptyRelation for join should check if remain child is just BroadcastQueryStageExec</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-49261">[SPARK-49261]</a>: Don&#8217;t replace literals in aggregate expressions with group-by expressions</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-49294">[SPARK-49294]</a>: Add width attribute for shuffle-write-time checkbox</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-49501">[SPARK-49501]</a>: Fix double-escaping of table location</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-49595">[SPARK-49595]</a>: Fix <code class="language-plaintext highlighter-rouge">DataFrame.unpivot/melt</code> in Spark Connect Scala Client</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-49628">[SPARK-49628]</a>: ConstantFolding should copy stateful expression before evaluating</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-49695">[SPARK-49695]</a>: Postgres fix xor push-down</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-49699">[SPARK-49699]</a>: Disable PruneFilters for streaming workloads</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-49743">[SPARK-49743]</a>: OptimizeCsvJsonExpr should not change schema fields when pruning GetArrayStructFields</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-49782">[SPARK-49782]</a>: ResolveDataFrameDropColumns rule resolves UnresolvedAttribute with child output</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-49791">[SPARK-49791]</a>: Make DelegatingCatalogExtension more extendable</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-49804">[SPARK-49804]</a>: Fix to use the exit code of executor container always</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-49816">[SPARK-49816]</a>: Should only update out-going-ref-count for referenced outer CTE relation</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-49819">[SPARK-49819]</a>: Disable CollapseProject for correlated subqueries in projection over aggregate correctly</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-49829">[SPARK-49829]</a>: Fix the bug on the optimization on adding input to state store in stream-stream join</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-49836">[SPARK-49836]</a>: Fix possibly broken query when window is provided to window/session_window fn</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-49843">[SPARK-49843]</a>: Fix change comment on char/varchar columns</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-49959">[SPARK-49959]</a>: Fix ColumnarArray.copy() to read nulls from the correct offset</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-49979">[SPARK-49979]</a>: Fix AQE hanging issue when collecting twice on a failed plan</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-50021">[SPARK-50021]</a>: Fix <code class="language-plaintext highlighter-rouge">ApplicationPage</code> to hide App UI links when UI is disabled</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-50022">[SPARK-50022]</a>: Fix <code class="language-plaintext highlighter-rouge">MasterPage</code> to hide App UI links when UI is disabled</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-50087">[SPARK-50087]</a>: Robust handling of boolean expressions in CASE WHEN for MsSqlServer and future connectors</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-50176">[SPARK-50176]</a>: Disallow reattaching after the session is closed</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-50195">[SPARK-50195]</a>: Fix <code class="language-plaintext highlighter-rouge">StandaloneRestServer</code> to propagate <code class="language-plaintext highlighter-rouge">spark.app.name</code> to <code class="language-plaintext highlighter-rouge">SparkSubmit</code> properly</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-50210">[SPARK-50210]</a>: Fix <code class="language-plaintext highlighter-rouge">SparkSubmit</code> to show REST API <code class="language-plaintext highlighter-rouge">kill</code> response properly</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-50235">[SPARK-50235]</a>: Clean up ColumnVector resource after processing all rows in ColumnarToRowExec</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-50258">[SPARK-50258]</a>: Fix output column order changed issue after AQE optimization</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-50312">[SPARK-50312]</a>: SparkThriftServer createServer parameter passing error when kerberos is true</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-50421">[SPARK-50421]</a>: Fix executor related memory config incorrect when multiple resource profiles worked</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-50433">[SPARK-50433]</a>: Fix configuring log4j2 guide docs for Spark on YARN and UT</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-50463">[SPARK-50463]</a>: Fix <code class="language-plaintext highlighter-rouge">ConstantColumnVector</code> with Columnar to Row conversion</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-50483">[SPARK-50483]</a>: BlockMissingException should be thrown even if ignoreCorruptFiles is enabled</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-50492">[SPARK-50492]</a>: Fix java.util.NoSuchElementException when event time column is dropped after dropDuplicatesWithinWatermark</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-50498">[SPARK-50498]</a>: Avoid unnecessary py4j call in <code class="language-plaintext highlighter-rouge">listFunctions</code></li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-50505">[SPARK-50505]</a>: Fix <code class="language-plaintext highlighter-rouge">spark.storage.replication.proactive</code> default value documentation</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-50510">[SPARK-50510]</a>: Fix sporadic ReattachableExecuteSuite failure</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-50545">[SPARK-50545]</a>: <code class="language-plaintext highlighter-rouge">AccessControlException</code> should be thrown even if <code class="language-plaintext highlighter-rouge">ignoreCorruptFiles</code> is enabled</li>
</ul>

<h3 id="dependency-changes">Dependency changes</h3>
<p>While being a maintenance release we did still upgrade some dependencies in this release they are:</p>
<ul>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-50150">[SPARK-50150]</a>: Upgrade Jetty to 9.4.56.v20240826</li>
  <li><a href="https://issues.apache.org/jira/browse/SPARK-50316">[SPARK-50316]</a>: Upgrade ORC to 1.9.5</li>
</ul>

<p>You can consult JIRA for the <a href="https://s.apache.org/spark-3.5.4">detailed changes</a>.</p>

<p>We would like to acknowledge all community members for contributing patches to this release.</p>


<p>
<br/>
<a href="/news/">Spark News Archive</a>
</p>

    </div>
    <div class="col-12 col-md-3">
      <div class="news" style="margin-bottom: 20px;">
        <h5>Latest News</h5>
        <ul class="list-unstyled">
          
          <li><a href="/news/spark-3-5-4-released.html">Spark 3.5.4 released</a>
            <span class="small">(Dec 20, 2024)</span></li>
          
          <li><a href="/news/spark-3-4-4-released.html">Spark 3.4.4 released</a>
            <span class="small">(Oct 27, 2024)</span></li>
          
          <li><a href="/news/spark-4.0.0-preview2.html">Preview release of Spark 4.0</a>
            <span class="small">(Sep 26, 2024)</span></li>
          
          <li><a href="/news/spark-3-5-3-released.html">Spark 3.5.3 released</a>
            <span class="small">(Sep 24, 2024)</span></li>
          
        </ul>
        <p class="small" style="text-align: right;"><a href="/news/index.html">Archive</a></p>
      </div>
      <div style="text-align:center; margin-bottom: 20px;">
        <a href="https://www.apache.org/events/current-event.html">
          <img src="https://www.apache.org/events/current-event-234x60.png" style="max-width: 100%;"/>
        </a>
      </div>
      <div class="hidden-xs hidden-sm">
        <a href="/downloads.html" class="btn btn-cta btn-lg d-grid" style="margin-bottom: 30px;">
          Download Spark
        </a>
        <p style="font-size: 16px; font-weight: 500; color: #555;">
          Built-in Libraries:
        </p>
        <ul class="list-none">
          <li><a href="/sql/">SQL and DataFrames</a></li>
          <li><a href="/streaming/">Spark Streaming</a></li>
          <li><a href="/mllib/">MLlib (machine learning)</a></li>
          <li><a href="/graphx/">GraphX (graph)</a></li>
        </ul>
        <a href="/third-party-projects.html">Third-Party Projects</a>
      </div>
    </div>
  </div>

  

  <footer class="small">
    <hr>
    Apache Spark, Spark, Apache, the Apache feather logo, and the Apache Spark project logo are either registered
    trademarks or trademarks of The Apache Software Foundation in the United States and other countries.
    See guidance on use of Apache Spark <a href="/trademarks.html">trademarks</a>.
    All other marks mentioned may be trademarks or registered trademarks of their respective owners.
    Copyright &copy; 2018 The Apache Software Foundation, Licensed under the
    <a href="https://www.apache.org/licenses/">Apache License, Version 2.0</a>.
  </footer>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery.js"></script>
<script src="/js/lang-tabs.js"></script>
<script src="/js/downloads.js"></script>
</body>
</html>
